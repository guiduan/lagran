<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="renderer" content="webkit"/>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport"
          name="viewport">
    <title>DPlayer智能解析 - share直连和m3u8</title>
    <style type="text/css">body, html, .dplayer {
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
        color: #aaa;
        background-color: #000;
    }

    a {
        text-decoration: none;
    }</style>
    <script type="text/javascript" src="/dplayer/hls.min.js"></script>
    <script type="text/javascript" src="/dplayer/DPlayer.min.js"></script>
    <link type="text/css" href="/dplayer/DPlayer.min.css" rel="stylesheet">
</head>
<body>
<div id="dplayer"></div>
<script type="text/javascript">
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }

    var vid = GetQueryString("url");
    if (vid.indexOf("/share/") > 0) {
        location.href = vid;
    } else
        var vid = GetQueryString("url");
    if (vid.indexOf("/v/") > 0) {
        location.href = vid;
    } else {
        var index = vid.indexOf("https://");
        if (index == 0 && document.location.protocol == "http:") {
            document.location.protocol = "https:";
        } else {

        }

        const dp = new DPlayer({
            container: document.getElementById('dplayer'),
            autoplay: true,
            loop: true,
            video: {
                url: vid,
                type: 'hls'
            }
        });

    }
</script>
<span style="display:none">

</span>
</body>
</html>
